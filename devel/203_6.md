# 203_6
## 如何测试
### 测试
1. 复制下面这串 latex 代码，在 STEM 中，右键->`Paste from`-> `Latex`
```
\begin{align}
    \int x^n \,dx = \frac{x^{n+1}}{n+1} + C, \quad \text{where } n \neq -1 \label{eq:integral}
\end{align}

\begin{align}
    \sigma_{xx}^{(1)}=\frac{\sigma_1}{1+(\mu_1 B)^2}, \sigma_{xy}^{(1)}=\frac{\sigma_1 \mu_1 B}{1+(\mu_1 B)^2};  \\   \sigma_{xx}^{(2)}=\frac{\sigma_2}{1+(\mu_2 B)^2}, \sigma_{xy}^{(2)}=\frac{\sigma_2 \mu_2 B}{1+(\mu_2 B)^2},
    \sigma_{xx}^{(2)}=\frac{\sigma_2}{1+(\mu_2 B)^2}, \\
    \sigma_{xx}^{(2)}=\frac{\sigma_2}{1+(\mu_2 B)^2},
\end{align}
```
2. 检查：方程均先右对齐，然后居中


## 2025/08/21 修复 latex 导入无 & 号的单行的多行公式时缩进错误
### What?
See issue: ICU06X

### Why?
- 当 eqnarray 和 align 等环境在内部处理时被标记 eq = true
- 原本的判断条件，`if (split == "" && nr_cols == 1 && !eq) return r;` 要求非方程环境才直接返回，否则会进入下面的 table 构建
- table 构建中，由于输入的公式并没有 & 号分隔，被错误的构建成了只有一列的 table。在编辑区的表现就是左对齐。

### How？
修改条件`!eq` 为 `(!eq || nr_rows == 1)`，从而让单列（无分割）的公式也被直接返回

