# 205_7 MuPDF：修复Tooltip渲染异常
## 如何测试
启用MuPDF后编译、运行，打开`TeXmacs/tests/tmu/204_1_preview_ref.tmu`这个文档，然后光标放在Theorem 1 的 1这个数字上查看效果。

## 2025/08/04
### What
由于Tooltip组件创建过程中未调用 `invalidate_rect()`, 在`qt_simple_widget_rep::repaint_invalid_regions()`中未能及时对Tooltip内容进行绘制。

1. 修改MuPDF启用时的 `qt_simple_widget_rep()` 构造函数代码，在此处初始化宽、高为0，创建空白 `backing_store()`。
2. 移除此前在`qt_simple_widget_rep::as_qwidget()`中更新宽、高的代码。

修改依据：参考QT渲染器的流程，更新宽、高等参数的过程应在`repaint_invalid_regions()`中进行，这样就能及时调用`invalidate_rect()`。

### Why
在启用MuPDF渲染器后，无法正常显示Tooltip内容
